<html><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=utf-8" /><META NAME="save" CONTENT="history" /><title xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">Reader-Writer Synchronization Technology Sample</title><META NAME="Description" CONTENT="&#xD;&#xA;                    This sample demonstrates use of the T:System.Threading.ReaderWriterLock thread synchronization class. The functionality of the T:System.Threading.ReaderWriterLock type allows the developer to write code that enforces exclusive a ..."></META><META NAME="MS.LOCALE" CONTENT="en-us" /><style>
body
{font-family:Verdana;font-size:medium;}
div#mainSection, div#header
{font-size:70%;width: 100%;}
div#mainBody
{font-size:90%;}
div#mainSection div table
{font-size: 100%;text-align: left;}
span#nsrTitle
{color:#003399;font-size:90%;font-weight:600;}
div#header
{background-color:#D4DFFF;}
.heading
{font-size:120%;color:#003399;}
.subHeading
{font-size:100%;margin-bottom:4;}
li
{margin-top:-2;margin-bottom:3;}
p
{margin-top:10;margin-bottom:5;}
div.tableSection p
{margin-top:1;margin-bottom:4;}	
div#mainSection table th
{background-color:#EFEFF7;color:#000066;text-align:left;}
div#mainSection table td
{background-color:#F7F7FF;}
div#mainSection table
{margin-top:5px;margin-bottom: px;}
			</style></head><body><div id="header"><table width="100%" id="topTable"></table></div><div id="mainSection"><div id="mainBody"><br /><font color="DarkGray">[This readme is a partial copy of the sample's topic in the SDK documentation.]</font><br /><font color="DarkGray" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt"></font><p xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt"></p><div class="introduction"><p xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">
                    This sample demonstrates use of the <span sdata="cer" target="T:System.Threading.ReaderWriterLock">ReaderWriterLock</span> thread synchronization class. The functionality of the <span sdata="cer" target="T:System.Threading.ReaderWriterLock">ReaderWriterLock</span> type allows the developer to write code that enforces exclusive access to a shared resource while a thread is writing or modifying the resource, but allows non-exclusive access when reading or querying the resource.
                </p><p xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">
                    For more information about using the samples, see the following topics:
                </p><ul xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><li><p><span sdata="link">How to: View and Download Samples</span></p></li><li><p><span sdata="link">How to: Set Sample Settings</span></p></li></ul></div><h3 class="procedureSubHeading" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">To build the sample using the command prompt</h3><div class="subSection"><ol xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><li><p>
                    Open a Command Prompt window and navigate to one of the language-specific subdirectories for the sample. 
                </p></li><li><p>
                    Type <span class="input">msbuild ReaderWriterSynchronizationCS.sln</span> or <span class="input">msbuild ReaderWriterSynchronizationVB.sln</span>, depending on your choice of programming language, at the command line. 
                </p></li></ol></div><h3 class="procedureSubHeading" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">To build the sample using Visual Studio</h3><div class="subSection"><ol xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><li><p>
                    Open Windows Explorer and navigate to one of the language-specific subdirectories for the sample.
                </p></li><li><p>
                    Double-click the icon for <b>ReaderWriterSynchronizationCS</b>.sln or <b>ReaderWriterSynchronizationVB.sln</b>, depending on your choice of programming language, to open the file in Visual Studio.
                </p></li><li><p>
                    On the <span class="ui">Build</span> menu, click <span class="ui">Build Solution</span>.
                </p></li></ol></div><h3 class="procedureSubHeading" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">To run the sample</h3><div class="subSection"><ol xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><li><p>
                    Navigate to the directory that contains the new executable file.
                </p></li><li><p>
                    Type <span class="input">ReaderWriter.exe</span> from the command line. 
                </p><div class="alert"><table width="100%" cellspacing="0" cellpadding="0"><tr><th align="left"><b>Note:</b></th></tr><tr><td><p>
					 This sample builds a console application. You must launch it from the command prompt in order to view its output. When running the sample, notice that the 
								
								<span class="ui">Start Writing</span> and <span class="ui">Stop Writing</span> output for each writer occurs successively. This is because the writers hold exclusive access to the resource, unlike the readers.
							</p></td></tr></table></div></li></ol></div><h1 class="heading" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><span onclick="ExpandCollapse(sectionToggle0)" style="cursor:default;" onkeypress="ExpandCollapse_CheckKey(sectionToggle0, event)" tabindex="0">Remarks</span></h1><div id="sectionSection0" class="section"><p xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">
                    For more information about thread synchronization and exclusive access, see the comments in the source code and build.proj files.
                </p><p xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">
                    The following bullets briefly describe the classes and technologies used by this sample.  
                </p><ul xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><li><p>
                    Thread Synchronization 
                </p></li></ul><p xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><span sdata="cer" target="T:System.Threading.ReaderWriterLock">ReaderWriterLock</span>Used to protect a logical resource which is implemented as a call to <span sdata="cer" target="M:System.Threading.Thread.Sleep(System.Int32)">Sleep</span>. Threads using the <span sdata="cer" target="T:System.Threading.ReaderWriterLock">ReaderWriterLock</span> type can hold the lock in two different ways. First, a thread can hold a read-lock, which is non-exclusive and will allow other threads to gain a read-lock for the class. Second, a thread can request a write-lock, which is exclusive, and is not granted until currently held read and write locks are released.
                </p><ul xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><li><p><span sdata="cer" target="T:System.Threading.AutoResetEvent">AutoResetEvent</span>The sample's main thread waits on an <span sdata="cer" target="T:System.Threading.AutoResetEvent">AutoResetEvent</span> object until it is set, which indicates that the last of the asynchronous functions are finished doing their work.
                </p></li><li><p><span sdata="cer" target="T:System.Threading.Interlocked">Interlocked</span>The sample uses the static <span sdata="cer" target="Overload:System.Threading.Interlocked.Increment">Interlocked..::.Increment</span> and <span sdata="cer" target="Overload:System.Threading.Interlocked.Decrement">Interlocked..::.Decrement</span> methods to asynchronously access a counter variable to indicate when the <span sdata="cer" target="T:System.Threading.AutoResetEvent">AutoResetEvent</span> should be set.
                </p></li></ul><ul xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><li><p><b>Threading</b></p><ul><li><p><span sdata="cer" target="T:System.Threading.ThreadPool">ThreadPool</span> When writing managed code, it is suggested that whenever possible, developers use the <span sdata="cer" target="Overload:System.Threading.ThreadPool.QueueUserWorkItem">QueueUserWorkItem</span> method to implement asynchronous method calls. This sample uses this approach to execute code that contends for a logical resource.
                </p></li></ul></li><li><p><b>Delegates </b></p><ul><li><p><span sdata="cer" target="T:System.Threading.WaitCallback">WaitCallback</span> Used to create a type-safe callback method for the <span sdata="cer" target="T:System.Threading.ThreadPool">ThreadPool</span> class to use.
                </p></li></ul></li></ul></div><h1 class="heading" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><span onclick="ExpandCollapse(seeAlsoToggle)" style="cursor:default;" onkeypress="ExpandCollapse_CheckKey(seeAlsoToggle, event)" tabindex="0">See Also</span></h1><div id="seeAlsoSection" class="section"><h4 class="subHeading" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">Concepts</h4><div class="seeAlsoStyle"><span sdata="link" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">Threads and Threading</span></div><h4 class="subHeading" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">Reference</h4><div class="seeAlsoStyle"><span sdata="cer" target="T:System.Threading.AutoResetEvent" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">AutoResetEvent</span></div><div class="seeAlsoStyle"><span sdata="cer" target="T:System.Delegate" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">Delegate</span></div><div class="seeAlsoStyle"><span sdata="cer" target="T:System.Threading.Interlocked" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">Interlocked</span></div><div class="seeAlsoStyle"><span sdata="cer" target="T:System.Threading.Mutex" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">Mutex</span></div><div class="seeAlsoStyle"><span sdata="cer" target="N:System.Threading" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">System.Threading</span></div><div class="seeAlsoStyle"><span sdata="cer" target="T:System.Threading.ThreadPool" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">ThreadPool</span></div><div class="seeAlsoStyle"><span sdata="cer" target="T:System.Threading.WaitCallback" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">WaitCallback</span></div><div class="seeAlsoStyle"><span sdata="cer" target="T:System.Threading.WaitHandle" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">WaitHandle</span></div><h4 class="subHeading" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">Other Resources</h4><div class="seeAlsoStyle"><span sdata="link" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:msxsl="urn:schemas-microsoft-com:xslt">Threading Objects and Features</span></div></div></div></div></body></html>